const chartistSvg = require("svg-chartist");
const fs = require("fs");

const data = JSON.parse(fs.readFileSync(process.argv[2], "utf8"));
let totalRecords = data.labels.length;

const options = {
  fullWidth: true,
  width: 1084,
  height: 545,
  showArea: true,
  axisX: {
    labelInterpolationFnc: function (value, index) {
      value = value.replace(" ", "");
      if (totalRecords > 80) {
        return index % 5 === 0 ? value : null;
      }
      if (totalRecords > 60) {
        return index % 4 === 0 ? value : null;
      }
      if (totalRecords > 30) {
        return index % 3 === 0 ? value : null;
      }
      if (totalRecords > 20) {
        return index % 2 === 0 ? value : null;
      }
      return index % 2 === 0 ? value : null;
    },
  },
};

const opts = {
  options: options,
};

chartistSvg("line", data, opts).then((html) => {
  html = html
    .replace("<svg", '<svg xmlns="http://www.w3.org/2000/svg" ')
    .replace(/ width="(.*?)"/, "")
    .replace(/ height="(.*?)"/, "")
    .replace(/ viewBox="(.*?)"/, "")
    .replace(/<svg(.*?)>/, `<svg$1 x="56" y="56" width="1084" height="545">`);

  html = `
    <svg width="1200" height="650" viewBox="0 0 1200 650" fill="none" xmlns="http://www.w3.org/2000/svg">
      <rect width="1200" height="650" fill="white"/>
      ${html}
      <path d="M479.976 632.712H478.344V634.44H469.752V632.808H468.024V624.192H469.656V622.488H478.272V624.12H479.976V632.712ZM476.544 632.712V624.192H471.456V632.712H476.544ZM493.171 629.28H491.539V631.008H484.699V634.44H481.219V622.488H491.467V624.12H493.171V629.28ZM489.739 629.28V624.192H484.651V629.28H489.739ZM506.583 634.344H494.487V622.272H506.583V623.952H497.967V627.384H503.127V629.16H497.967V632.592H506.583V634.344ZM519.562 634.44H516.178V632.808H514.474V631.08H512.77V629.328H511.09V634.44H507.61V622.488H510.994V624.12H512.722V625.824H514.426V627.576H516.106V622.488H519.562V634.44ZM532.757 632.712H531.125V634.44H522.533V632.808H520.805V631.056H524.189V632.712H529.349V629.376H522.533V627.648H520.805V624.192H522.437V622.488H529.325V624.12H531.053V625.848H527.669V624.192H524.237V627.528H531.053V629.256H532.757V632.712ZM545.953 632.712H544.321V634.44H535.729V632.808H534.001V624.192H535.633V622.488H544.249V624.12H545.953V632.712ZM542.521 632.712V624.192H537.433V632.712H542.521ZM559.148 632.712H557.516V634.44H548.924V632.808H547.196V622.488H550.58V632.712H555.692V622.488H559.148V632.712ZM572.343 629.28H568.959V630.96H570.639V632.688H572.343V634.44H567.255V632.808H565.551V631.032H563.871V634.44H560.391V622.488H570.639V624.12H572.343V629.28ZM568.911 627.576V624.192H563.823V629.28H567.279V627.576H568.911ZM585.539 625.848H582.155V624.192H578.771V625.848H577.019V630.96H578.699V632.712H582.083V631.056H585.539V632.712H583.907V634.44H577.019V632.808H575.315V631.08H573.587V625.896H575.219V624.192H576.947V622.488H583.835V624.12H585.539V625.848ZM598.95 634.344H586.854V622.272H598.95V623.952H590.334V627.384H595.494V629.16H590.334V632.592H598.95V634.344ZM600.913 630.504V628.632H606.721V630.504H600.913ZM619.664 634.44H616.28V629.328H611.192V634.44H607.712V622.488H611.096V627.576H616.208V622.488H619.664V634.44ZM633.075 634.344H620.979V622.272H633.075V623.952H624.459V627.384H629.619V629.16H624.459V632.592H633.075V634.344ZM646.054 629.28H642.67V630.96H644.35V632.688H646.054V634.44H640.966V632.808H639.262V631.032H637.582V634.44H634.102V622.488H644.35V624.12H646.054V629.28ZM642.622 627.576V624.192H637.534V629.28H640.99V627.576H642.622ZM659.249 632.712H657.617V634.44H649.025V632.808H647.297V624.192H648.929V622.488H657.545V624.12H659.249V632.712ZM655.817 632.712V624.192H650.729V632.712H655.817ZM672.661 634.344H660.565V622.272H672.661V623.952H664.045V627.384H669.205V629.16H664.045V632.592H672.661V634.344ZM685.64 632.712H684.008V634.44H675.416V632.808H673.688V631.056H677.072V632.712H682.232V629.376H675.416V627.648H673.688V624.192H675.32V622.488H682.208V624.12H683.936V625.848H680.552V624.192H677.12V627.528H683.936V629.256H685.64V632.712ZM688.587 634.704C688.587 634.112 688.731 633.696 689.019 633.456C689.307 633.216 689.651 633.096 690.051 633.096C690.467 633.096 690.819 633.216 691.107 633.456C691.411 633.696 691.563 634.112 691.563 634.704C691.563 635.28 691.411 635.696 691.107 635.952C690.819 636.208 690.467 636.336 690.051 636.336C689.651 636.336 689.307 636.208 689.019 635.952C688.731 635.696 688.587 635.28 688.587 634.704ZM705.257 625.848H701.873V624.192H698.489V625.848H696.737V630.96H698.417V632.712H701.801V631.056H705.257V632.712H703.625V634.44H696.737V632.808H695.033V631.08H693.305V625.896H694.937V624.192H696.665V622.488H703.553V624.12H705.257V625.848ZM718.453 632.712H716.821V634.44H708.229V632.808H706.501V624.192H708.133V622.488H716.749V624.12H718.453V632.712ZM715.021 632.712V624.192H709.933V632.712H715.021ZM731.648 634.44H728.264V629.328H726.584V631.008H724.856V629.328H723.176V634.44H719.696V622.488H723.08V624.12H724.808V625.872H726.464V624.192H728.192V622.488H731.648V634.44Z" fill="#E67D65"/>
      <rect x="117.201" y="76.3906" width="235.719" height="30.8278" fill="white" stroke="black"/>
      <rect x="120.682" y="82" width="20" height="20" fill="#D70206"/>
      <text x="146" y="82" fill="#D70206" font-size="20px" font-family="Arial" dy="18px" font-weight="700" line-height="1">${data.name}</text>
      <rect width="249" height="24" transform="translate(396 16)" fill="white"/>
      <path d="M412 31H404V37H412V31Z" fill="black"/>
      <path d="M413 37H403V39H413V37Z" fill="black"/>
      <path d="M413 39H403V40H413V39Z" fill="black"/>
      <path d="M413 32H403V31H413V32Z" fill="black"/>
      <path d="M414 31H402V30H414V31Z" fill="black"/>
      <path d="M419 28H397V27H419V28Z" fill="black"/>
      <path d="M418 29H398V28H418V29Z" fill="black"/>
      <path d="M420 27H396V18H420V27Z" fill="black"/>
      <path d="M419 18H397V17H419V18Z" fill="black"/>
      <path d="M415 17H401V16H415V17Z" fill="black"/>
      <path d="M417 30H399V29H417V30Z" fill="black"/>
      <path d="M411 18H405V35H411V18Z" fill="#E1B437"/>
      <path d="M411 18H412V30H411V18Z" fill="#E1B437"/>
      <path d="M416 19H400V27H416V19Z" fill="#E1B437"/>
      <path d="M415 17H401V19H415V17Z" fill="#FAF492"/>
      <path d="M401 18H397V19H401V18Z" fill="#E1B437"/>
      <path d="M399 18H397V25H399V18Z" fill="#E1B437"/>
      <path d="M419 18H417V25H419V18Z" fill="#E1B437"/>
      <path d="M417 27H399V28H417V27Z" fill="#E1B437"/>
      <path d="M411 37H405V39H411V37Z" fill="#E1B437"/>
      <path d="M412 27H404V29H412V27Z" fill="#E1B437"/>
      <path d="M414 17H412V25H414V17Z" fill="#FAF492"/>
      <path d="M412 25H410V27H412V25Z" fill="#FAF492"/>
      <path d="M412 37H410V39H412V37Z" fill="#FAF492"/>
      <path d="M417 18H416V20H417V18Z" fill="#D37D34"/>
      <path d="M400 18H399V20H400V18Z" fill="#D37D34"/>
      <path d="M399 25H397V27H399V25Z" fill="#D37D34"/>
      <path d="M404 27H399V29H404V27Z" fill="#D37D34"/>
      <path d="M407 29H403V31H407V29Z" fill="#D37D34"/>
      <path d="M413 29H409V31H413V29Z" fill="#D37D34"/>
      <path d="M419 25H417V27H419V25Z" fill="#D37D34"/>
      <path d="M417 27H412V29H417V27Z" fill="#D37D34"/>
      <path d="M411 31H405V33H411V31Z" fill="#D37D34"/>
      <path d="M406 37H404V39H406V37Z" fill="#FAF492"/>
      <path d="M411 35H405V37H411V35Z" fill="#FAF492"/>
      <path d="M411 33H409V35H411V33Z" fill="#FAF492"/>
      <path d="M416 18H400V19H416V18Z" fill="#FAF492"/>
      <path d="M438.976 31.7125H437.344V33.4405H428.752V31.8085H427.024V23.1925H428.656V21.4885H437.272V23.1205H438.976V31.7125ZM435.544 31.7125V23.1925H430.456V31.7125H435.544ZM452.172 28.2805H450.54V30.0085H443.7V33.4405H440.22V21.4885H450.468V23.1205H452.172V28.2805ZM448.74 28.2805V23.1925H443.652V28.2805H448.74ZM465.583 33.3445H453.487V21.2725H465.583V22.9525H456.967V26.3845H462.127V28.1605H456.967V31.5925H465.583V33.3445ZM478.562 33.4405H475.178V31.8085H473.474V30.0805H471.77V28.3285H470.09V33.4405H466.61V21.4885H469.994V23.1205H471.722V24.8245H473.426V26.5765H475.106V21.4885H478.562V33.4405ZM494.828 31.7125H493.196V33.4405H484.604V31.8085H482.876V30.0565H486.26V31.7125H491.42V28.3765H484.604V26.6485H482.876V23.1925H484.508V21.4885H491.396V23.1205H493.124V24.8485H489.74V23.1925H486.308V26.5285H493.124V28.2565H494.828V31.7125ZM508.023 31.7125H506.391V33.4405H497.799V31.8085H496.071V23.1925H497.703V21.4885H506.319V23.1205H508.023V31.7125ZM504.591 31.7125V23.1925H499.503V31.7125H504.591ZM521.218 31.7125H519.586V33.4405H510.994V31.8085H509.266V21.4885H512.65V31.7125H517.762V21.4885H521.218V31.7125ZM534.414 28.2805H531.03V29.9605H532.71V31.6885H534.414V33.4405H529.326V31.8085H527.622V30.0325H525.942V33.4405H522.462V21.4885H532.71V23.1205H534.414V28.2805ZM530.982 26.5765V23.1925H525.894V28.2805H529.35V26.5765H530.982ZM547.609 24.8485H544.225V23.1925H540.841V24.8485H539.089V29.9605H540.769V31.7125H544.153V30.0565H547.609V31.7125H545.977V33.4405H539.089V31.8085H537.385V30.0805H535.657V24.8965H537.289V23.1925H539.017V21.4885H545.905V23.1205H547.609V24.8485ZM561.02 33.3445H548.924V21.2725H561.02V22.9525H552.404V26.3845H557.564V28.1605H552.404V31.5925H561.02V33.3445ZM577.07 33.4405H573.686V28.3285H568.598V33.4405H565.118V21.4885H568.502V26.5765H573.614V21.4885H577.07V33.4405ZM590.481 33.3445H578.385V21.2725H590.481V22.9525H581.865V26.3845H587.025V28.1605H581.865V31.5925H590.481V33.3445ZM603.46 28.2805H600.076V29.9605H601.756V31.6885H603.46V33.4405H598.372V31.8085H596.668V30.0325H594.988V33.4405H591.508V21.4885H601.756V23.1205H603.46V28.2805ZM600.028 26.5765V23.1925H594.94V28.2805H598.396V26.5765H600.028ZM616.656 31.7125H615.024V33.4405H606.432V31.8085H604.704V23.1925H606.336V21.4885H614.952V23.1205H616.656V31.7125ZM613.224 31.7125V23.1925H608.136V31.7125H613.224ZM630.067 33.3445H617.971V21.2725H630.067V22.9525H621.451V26.3845H626.611V28.1605H621.451V31.5925H630.067V33.3445ZM643.046 31.7125H641.414V33.4405H632.822V31.8085H631.094V30.0565H634.478V31.7125H639.638V28.3765H632.822V26.6485H631.094V23.1925H632.726V21.4885H639.614V23.1205H641.342V24.8485H637.958V23.1925H634.526V26.5285H641.342V28.2565H643.046V31.7125Z" fill="black"/>
      <path d="M662.976 31.7123H661.344V33.4403H652.752V31.8083H651.024V30.0563H654.408V31.7123H659.568V28.3763H652.752V26.6483H651.024V23.1923H652.656V21.4883H659.544V23.1203H661.272V24.8483H657.888V23.1923H654.456V26.5283H661.272V28.2563H662.976V31.7123Z" fill="#E67D65"/>
      <path d="M673.604 23.1443H670.244V33.4403H666.788V23.2403H663.356V21.4883H673.604V23.1443Z" fill="#E67D65"/>
      <path d="M689.367 33.4403H685.983V30.0323H680.895V33.4403H677.415V24.8963H679.047V23.1923H680.775V21.4883H685.935V23.1203H687.663V24.8243H689.367V33.4403ZM685.935 28.2803V24.8243H684.231V23.1923H682.479V24.9203H680.847V28.2803H685.935Z" fill="#E67D65"/>
      <path d="M702.562 28.2803H699.178V29.9603H700.858V31.6883H702.562V33.4403H697.474V31.8083H695.77V30.0323H694.09V33.4403H690.61V21.4883H700.858V23.1203H702.562V28.2803ZM699.13 26.5763V23.1923H694.042V28.2803H697.498V26.5763H699.13Z" fill="#E67D65"/>
      <path d="M714.486 38.6963H703.734V37.1603H714.486V38.6963Z" fill="#E67D65"/>
      <path d="M726.422 33.4403H723.038V28.3283H717.95V33.4403H714.47V21.4883H717.854V26.5763H722.966V21.4883H726.422V33.4403Z" fill="#E67D65"/>
      <path d="M739.113 33.4403H728.865V31.7603H732.249V23.2403H728.865V21.4883H739.113V23.1443H735.729V31.6883H739.113V33.4403Z" fill="#E67D65"/>
      <path d="M752.812 31.7123H751.18V33.4403H742.588V31.8083H740.86V30.0563H744.244V31.7123H749.404V28.3763H742.588V26.6483H740.86V23.1923H742.492V21.4883H749.38V23.1203H751.108V24.8483H747.724V23.1923H744.292V26.5283H751.108V28.2563H752.812V31.7123Z" fill="#E67D65"/>
      <path d="M763.44 23.1443H760.08V33.4403H756.624V23.2403H753.192V21.4883H763.44V23.1443Z" fill="#E67D65"/>
      <path d="M779.203 31.7123H777.571V33.4403H768.979V31.8083H767.251V23.1923H768.883V21.4883H777.499V23.1203H779.203V31.7123ZM775.771 31.7123V23.1923H770.683V31.7123H775.771Z" fill="#E67D65"/>
      <path d="M792.398 28.2803H789.014V29.9603H790.694V31.6883H792.398V33.4403H787.31V31.8083H785.606V30.0323H783.926V33.4403H780.446V21.4883H790.694V23.1203H792.398V28.2803ZM788.966 26.5763V23.1923H783.878V28.2803H787.334V26.5763H788.966Z" fill="#E67D65"/>
      <path d="M804.73 26.5763H803.098V28.2803H801.394V33.4403H797.914V28.3763H796.21V26.6483H794.482V21.4883H797.866V26.5763H801.274V21.4883H804.73V26.5763Z" fill="#E67D65"/>
    </svg>
  `;

  console.log(html);
});
